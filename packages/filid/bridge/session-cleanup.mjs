#!/usr/bin/env node
import{createHash as p}from"node:crypto";import{existsSync as u,mkdirSync as v,readFileSync as k,readdirSync as D,statSync as $,unlinkSync as a,writeFileSync as I}from"node:fs";import{homedir as g}from"node:os";import{join as s}from"node:path";function m(t){return p("sha256").update(t).digest("hex").slice(0,12)}function x(t){let n=process.env.CLAUDE_CONFIG_DIR??s(g(),".claude");return s(n,"plugins","filid",m(t))}function d(t){return p("sha256").update(t).digest("hex").slice(0,12)}function f(t,n){let r=x(n),o=d(t),i=s(r,`session-context-${o}`),c=s(r,`prompt-context-${o}`);try{u(i)&&a(i)}catch{}try{u(c)&&a(c)}catch{}}function h(t){let{cwd:n,session_id:r}=t;return f(r,n),{continue:!0}}var l=[];for await(let t of process.stdin)l.push(t);var y=Buffer.concat(l).toString("utf-8"),e;try{let t=JSON.parse(y);e=h(t)}catch{e={continue:!0}}process.stdout.write(JSON.stringify(e));

## **7\. 사용자 인터랙티브 질의 프로토콜 및 SPEC 업데이트 제어 기술**

코드베이스의 생명 주기를 유지함에 있어 가장 빈번하게 발생하는 인간과 AI의 접점은 사용자가 직접 새로운 명세를 요구하거나, AI가 변경 의도를 확신하지 못해 인간에게 질문을 던지는 상황이다.1 이 과정에서 에이전트가 사소한 내용까지 끊임없이 질문하게 되면, 사용자는 개발자에서 단순 검토자로 전락하여 심각한 '수정 피로도(Fix Fatigue)'와 '외생적 인지 부하(Extraneous Cognitive Load)'를 겪게 된다.1 FCA-AI는 이를 방지하기 위해 능동적 학습 전략과 인터랙티브 질의 통제 프로토콜을 구현한다.

### **7.1. 능동적 학습(Active Learning)과 객관식 제약 프로토콜**

에이전트는 사용자의 의도를 추론할 때 백지 상태에서 문장을 생성하게 만드는 개방형 질문(Open-ended Prompt)을 지양한다.1 시스템은 기계 학습의 '능동적 학습' 기법을 도입하여, 에이전트 내부의 '의도 확신도 점수(Uncertainty Sampling)'가 낮거나 다수의 백그라운드 모델 간 해석이 크게 엇갈릴 때(Committee-based Querying)에 한해서만 질의를 발생시킨다.1

질의가 트리거되면, 에이전트는 코드의 맥락을 '분할-조립(Decomposition)' 방식으로 선행 요약한 뒤, 자신이 도출한 3\~4개의 가장 그럴듯한 '의도 가설(Hypotheses)'을 생성하여 직관적인 객관식 메뉴(Bounded Choices) 형태로 렌더링한다.1 예를 들어, "코드 변경 의도가 무엇입니까?"가 아니라 "\[A\] 성능 최적화, 신규 인터페이스 연동, \[C\] 보안 패치" 중 하나를 클릭하도록 유도함으로써 사용자의 문맥 전환 비용을 대폭 삭감한다.1

### **7.2. 3-Prompt Limit 메커니즘과 명세-어서션 자동화**

사용자가 에이전트에게 SPEC.md의 업데이트를 지시할 때, 모호한 지시로 인해 양측의 대화가 끝없이 길어지는 프롬프트 소용돌이(Prompt Spiral) 현상을 차단해야 한다. 이를 위해 아키텍처는 단일 명세 파악을 위해 최대 3번의 대화 턴(Turn)까지만 허용하는 '3회 질의 제한(Three-Prompt Limit)' 규칙을 강제한다.1 3회 이내에 명확한 지시가 확립되지 않으면 시스템은 대화를 강제 종료하고 수동 리뷰 모드로 전환한다.

반대로 대화를 통해 의도가 확정되면, Context Manager는 즉시 SPEC.md를 갱신한다.1 이와 동시에 Implementer 에이전트는 단순한 텍스트 갱신에 머무르지 않고, 확정된 의도를 수학적으로 증명하기 위해 '의도 기반 어서션(Intent-Driven Assertions)'을 포함한 .spec.ts 테스트 코드를 즉석에서 생성하여 제안한다.1 사용자는 자신이 선택한 객관식 의도가 정확히 테스트 코드로 작성되었는지만 시각적으로 검증 및 승인하면 되며, 이를 바탕으로 인간과 에이전트 간의 완벽한 저마찰(Low-friction) 맥락 동기화 루프가 완성된다.1

#### 참고 자료

1. FCA-AI 아키텍처 심층 리서치 및 해결 방안

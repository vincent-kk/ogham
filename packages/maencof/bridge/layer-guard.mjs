#!/usr/bin/env node
import{existsSync as s}from"node:fs";import{join as a}from"node:path";var n="01_Core";function o(t){let e=t.replace(/\\/g,"/");return e.includes(`/${n}/`)||e.startsWith(`${n}/`)||e===n}var l=".maencof-meta",m=".maencof";function u(t){return s(a(t,m))||s(a(t,l))}async function c(){let t=[];for await(let e of process.stdin)t.push(e);return Buffer.concat(t).toString("utf-8")}function f(t){process.stdout.write(JSON.stringify(t))}function p(t){let e=t.cwd??process.cwd();if(!u(e))return{continue:!0};let r=t.tool_input?.file_path??t.tool_input?.path??"";return r?o(r)?{continue:!1,reason:["[maencof] Direct modification of Layer 1 (01_Core/) files is restricted.",`File: ${r}`,"","Layer 1 documents contain core identity (Hub nodes). To modify:","  1. Request changes through the identity-guardian agent (auto-delegated)","  2. Or retry with a sufficient justification"].join(`
`)}:{continue:!0}:{continue:!0}}var d=await c(),i;try{let t=JSON.parse(d);i=p(t)}catch{i={continue:!0}}f(i);
